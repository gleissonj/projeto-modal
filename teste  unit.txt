import { createElement } from 'lwc';
import MyComponent from 'c/myComponent';
import { CloseActionScreenEvent } from 'lightning/actions';

describe('c-my-component', () => {
    it('should dispatch a CloseActionScreenEvent with correct parameters', () => {
        // Create an instance of the component
        const element = createElement('c-my-component', { is: MyComponent });
        document.body.appendChild(element);

        // Spy on dispatchEvent
        element.dispatchEvent = jest.fn();

        // Call the handleCancel method
        element.handleCancel();

        // Assert dispatchEvent was called
        expect(element.dispatchEvent).toHaveBeenCalledTimes(1);

        // Assert the correct event type
        const event = element.dispatchEvent.mock.calls[0][0];
        expect(event).toBeInstanceOf(CloseActionScreenEvent);

        // Assert event parameters
        expect(event.bubbles).toBe(true);
        expect(event.composed).toBe(true);
    });
});