%dw 2.0
output application/json
---
payload map((item) -> {
    "FS1_DataValidacao__c": 
        if (item.dar_rfrc != null) 
            // Parse and format the datetime correctly
            (item.dar_rfrc as DateTime {format: "yyyy-MM-dd HH:mm:ss.SSSSSS"})
            as DateTime {format: "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"}
        else 
            null
})
