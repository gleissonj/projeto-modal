public class GrupoHandler_Responsaveis {

    public class EntradaGrupo {
        @InvocableVariable(required=true)
        public Account account;  // Recebendo o próprio objeto Account como input
    }

    public class ResultadoResponsaveis {
        @InvocableVariable
        public String grupo_nome;

        @InvocableVariable
        public List<String> responsaveis;
    }

    @InvocableMethod(label='Buscar responsáveis do grupo')
    public static List<ResultadoResponsaveis> buscarResponsaveis(List<EntradaGrupo> entradas) {
        List<ResultadoResponsaveis> resultados = new List<ResultadoResponsaveis>();

        for (EntradaGrupo entrada : entradas) {
            if (entrada.account == null || entrada.account.Id == null) continue;

            // Fazendo consulta para garantir o nome do grupo
            Account grupo = [SELECT Id, Name FROM Account WHERE Id = :entrada.account.Id LIMIT 1];

            ResultadoResponsaveis r = new ResultadoResponsaveis();
            r.grupo_nome = grupo.Name;

            // Mock de responsáveis - Substitua depois pelas queries reais
            r.responsaveis = new List<String>{
                'Carlos Menezes (Officer) – Região Sudeste – Plataforma B2B',
                'Ana Paula (Assistente) – Segmento Varejo'
            };

            resultados.add(r);
        }

        return resultados;
    }
}
