import { of } from 'rxjs'; // Simula o retorno de um Observable
import { TestBed } from '@angular/core/testing';
import { SeuComponente } from './seu-componente.component'; // Substitua pelo caminho correto
import { MultipartUploadService } from './multipart-upload.service'; // Substitua pelo caminho correto

describe('SeuComponente', () => {
  let component: SeuComponente;
  let multipartUploadServiceMock: any;

  beforeEach(() => {
    multipartUploadServiceMock = {
      startStepFunction: jest.fn().mockReturnValue(of(true)) // Mock do método retornando um Observable
    };

    TestBed.configureTestingModule({
      declarations: [SeuComponente],
      providers: [
        { provide: MultipartUploadService, useValue: multipartUploadServiceMock }
      ]
    }).compileComponents();

    const fixture = TestBed.createComponent(SeuComponente);
    component = fixture.componentInstance;
  });

  it('deve chamar startStepFunction para cada item na lista', () => {
    const listStepFunction = ['step1', 'step2', 'step3'];

    component.startMultiplesStepFunction(listStepFunction);

    // Verificar se startStepFunction foi chamado o número correto de vezes
    expect(multipartUploadServiceMock.startStepFunction).toHaveBeenCalledTimes(listStepFunction.length);

    // Verificar se startStepFunction foi chamado com os parâmetros corretos
    expect(multipartUploadServiceMock.startStepFunction).toHaveBeenCalledWith('step1');
    expect(multipartUploadServiceMock.startStepFunction).toHaveBeenCalledWith('step2');
    expect(multipartUploadServiceMock.startStepFunction).toHaveBeenCalledWith('step3');
  });
});
