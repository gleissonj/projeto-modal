<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 01-30-2025
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <lightning-card title="Datatable com Botões" class="custom-card">
        <div class="datatable-container">
            <lightning-datatable
                key-field="id"
                data={data}
                columns={columns}
                onrowaction={handleRowAction}
                 hide-checkbox-column="true"
                onrowselection={handleRowSelection}>
            </lightning-datatable>
        </div>

        <!-- Rodapé fixo sem espaço em branco -->
    
        <div class="footer">
            <lightning-button 
                variant="brand" 
                label="Confirmar" 
                class="button-size"
                onclick={handleConfirmSelection} 
               >
            </lightning-button>
        </div>
    </lightning-card>

    <!-- Modal de Detalhes da Linha -->
    <template if:true={isRowModalOpen}>
        <section role="dialog" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium">Detalhes do Registro</h2>
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                        onclick={closeRowModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="Fechar" size="small"></lightning-icon>
                    </button>
                </header>

                <div class="slds-modal__content slds-p-around_medium">
                    <p><strong>Nome:</strong> {selectedRow.name}</p>
                    <p><strong>CPF:</strong> {selectedRow.id}</p>
                </div>

                <footer class="slds-modal__footer">
                    <lightning-button variant="neutral" label="Fechar" onclick={closeRowModal}></lightning-button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <!-- Modal de Confirmação -->
    <template if:true={isConfirmModalOpen}>
        <section role="dialog" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium">Confirmação</h2>
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                        onclick={closeConfirmModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="Fechar" size="small"></lightning-icon>
                    </button>
                </header>

                <div class="slds-modal__content slds-p-around_medium">
                    <p>Você confirmou a seleção de {selectedRows.length} registros.</p>
                </div>

                <footer class="slds-modal__footer">
                    <lightning-button variant="neutral" label="Fechar" onclick={closeConfirmModal}></lightning-button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>
