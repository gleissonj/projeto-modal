public class GrupoHandler_Subgrupos {

    public class Request {
        @InvocableVariable(required=true)
        public String groupName;

        @InvocableVariable(required=true)
        public String codGrupo;
    }

    public class Response {
        @InvocableVariable
        public String prompt;  // √önico campo de sa√≠da
    }

    @InvocableMethod(label='Buscar subgrupos do grupo (Mockado)')
    public static List<Response> buscarSubgrupos(List<Request> requests) {
        List<Response> responses = new List<Response>();

        for (Request req : requests) {
            if (String.isBlank(req.groupName) || String.isBlank(req.codGrupo)) continue;

            String promptFinal = '‚úÖ Subgrupos do grupo ' + req.groupName + ' (C√≥digo: ' + req.codGrupo + '):\n\n';

            // Subgrupo 1: Alimentos
            promptFinal += 'üî∏ Subgrupo: Nestl√© Alimentos\n';
            promptFinal += 'CNPJs:\n';
            promptFinal += '- 12.345.678/0001-00 (Cabe√ßa)\n';
            promptFinal += '- 23.456.789/0001-11 (Raiz)\n\n';

            // Subgrupo 2: Bebidas
            promptFinal += 'üî∏ Subgrupo: Nestl√© Bebidas\n';
            promptFinal += 'CNPJs:\n';
            promptFinal += '- 34.567.890/0001-22 (Cabe√ßa)\n';
            promptFinal += '- 45.678.901/0001-33 (Raiz)\n\n';

            // Subgrupo 3: Chocolates
            promptFinal += 'üî∏ Subgrupo: Nestl√© Chocolates\n';
            promptFinal += 'CNPJs:\n';
            promptFinal += '- 56.789.012/0001-44 (Cabe√ßa)\n';
            promptFinal += '- 67.890.123/0001-55 (Raiz)';

            Response r = new Response();
            r.prompt = promptFinal;

            responses.add(r);
        }

        return responses;
    }
}






// Criando a entrada de teste
GrupoHandler_Subgrupos.Request req = new GrupoHandler_Subgrupos.Request();
req.groupName = 'Grupo Exemplo Nestl√©';
req.codGrupo = 'GRP-123';

List<GrupoHandler_Subgrupos.Request> listaRequests = new List<GrupoHandler_Subgrupos.Request>();
listaRequests.add(req);

// Executando o m√©todo Invocable
List<GrupoHandler_Subgrupos.Response> resultado = GrupoHandler_Subgrupos.buscarSubgrupos(listaRequests);

// Exibindo o resultado no log
System.debug('Resultado do Prompt:\n' + resultado[0].prompt);




