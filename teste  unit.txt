import { createElement } from 'lwc';
import MyComponent from 'c/myComponent';
import { ShowToastEvent } from 'lightning/platformShowToastEvent';

// Mock the dispatchEvent method
const dispatchEventMock = jest.fn();

describe('c-my-component', () => {
    it('should dispatch a ShowToastEvent with correct parameters', () => {
        // Create an instance of the component
        const element = createElement('c-my-component', { is: MyComponent });
        document.body.appendChild(element);

        // Spy on dispatchEvent
        element.dispatchEvent = dispatchEventMock;

        // Call the method
        const message = 'Test message';
        const variant = 'success';
        const title = 'Test title';
        element.showToast(message, variant, title);

        // Assert dispatchEvent was called
        expect(dispatchEventMock).toHaveBeenCalledTimes(1);

        // Assert the correct event type
        const event = dispatchEventMock.mock.calls[0][0];
        expect(event).toBeInstanceOf(ShowToastEvent);

        // Assert the event details
        expect(event.detail).toEqual({
            title,
            message,
            variant,
            mode: 'dismissable'
        });
    });
});
