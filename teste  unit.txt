import { TestBed } from '@angular/core/testing';
import { MatSnackBar } from '@angular/material/snack-bar';
import { SeuComponente } from './seu-componente.component'; // Substitua pelo caminho real

describe('SeuComponente', () => {
  let component: SeuComponente;
  let snackBarMock: any;

  beforeEach(() => {
    snackBarMock = {
      open: jasmine.createSpy('open') // Mock do MatSnackBar
    };

    TestBed.configureTestingModule({
      declarations: [SeuComponente],
      providers: [
        { provide: MatSnackBar, useValue: snackBarMock }
      ]
    }).compileComponents();

    const fixture = TestBed.createComponent(SeuComponente);
    component = fixture.componentInstance;
  });

  it('deve exibir a mensagem com o tipo correto', () => {
    const message = 'Teste de mensagem';
    const type = 'error';

    component.showMessage(message, type);

    // Verifica se o MatSnackBar.open foi chamado com os par√¢metros corretos
    expect(snackBarMock.open).toHaveBeenCalledWith(
      message,
      'Ok',
      {
        duration: 3000,
        horizontalPosition: 'end',
        verticalPosition: 'bottom',
        panelClass: ['error-snackbar'],
      }
    );

    // Verifica se o loading foi setado para false
    expect(component.loading).toBeFalse();
  });
});
