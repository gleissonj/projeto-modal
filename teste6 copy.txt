@isTest
static void testInsertNewLeads() {
    
    // Step 1: Create test Lead data
    Lead lead1 = new Lead(
        FirstName = 'John',
        LastName = 'Doe',
        HU7_CPF__c = '12345678901',
        Company = 'Company 1'
    );
    
    Lead lead2 = new Lead(
        FirstName = 'Jane',
        LastName = 'Doe',
        HU7_CPF__c = '98765432100',
        Company = 'Company 2'
    );
    
    List<Lead> newLeadsToInsert = new List<Lead>{ lead1, lead2 };
    
    // Step 2: Insert leads in the test context (without SELECT)
    Test.startTest();
    
    // Execute the method under test (this should insert the leads into the database)
    LeadService.insertNewLeads(newLeadsToInsert);
    
    Test.stopTest();
    
    // Step 3: Assertions
    
    // Assert that the leads were inserted correctly by checking the Id of the leads
    // The Id field will be populated after the insert if the insert was successful
    System.assertNotEquals(null, newLeadsToInsert[0].Id, 'First lead should have an Id after insertion.');
    System.assertNotEquals(null, newLeadsToInsert[1].Id, 'Second lead should have an Id after insertion.');
    
    // Validate the inserted leads using the list itself (no SELECT needed)
    System.assertEquals('John', newLeadsToInsert[0].FirstName, 'First lead should have the correct first name.');
    System.assertEquals('Doe', newLeadsToInsert[0].LastName, 'First lead should have the correct last name.');
    System.assertEquals('12345678901', newLeadsToInsert[0].HU7_CPF__c, 'First lead should have the correct CPF.');
    System.assertEquals('Company 1', newLeadsToInsert[0].Company, 'First lead should have the correct company.');
    
    System.assertEquals('Jane', newLeadsToInsert[1].FirstName, 'Second lead should have the correct first name.');
    System.assertEquals('Doe', newLeadsToInsert[1].LastName, 'Second lead should have the correct last name.');
    System.assertEquals('98765432100', newLeadsToInsert[1].HU7_CPF__c, 'Second lead should have the correct CPF.');
    System.assertEquals('Company 2', newLeadsToInsert[1].Company, 'Second lead should have the correct company.');
}
